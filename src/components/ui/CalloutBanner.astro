---
export interface SubLink {
  label: string;
  href: string;
}

export interface Props {
  heading: string;
  subText?: string;
  subLinks?: SubLink[];
  logo?: string;
  logoAlt?: string;
  cta?: {
    label: string;
    href: string;
    variant?: 'outline' | 'solid';
  };
  bgGradient?: string;
  className?: string;
}

const { 
  heading,
  subText,
  subLinks = [],
  logo,
  logoAlt,
  cta,
  bgGradient = "var(--gradient-admision-financiamiento)",
  className = ""
} = Astro.props;
---

<section class={`callout-banner relative py-20 ${className}`} style={`background: ${bgGradient};`}>
  
  <!-- Curva superior -->
  <div class="absolute top-0 left-0 w-full overflow-hidden leading-none">
    <svg 
      class="relative block w-full h-16 md:h-24" 
      xmlns="http://www.w3.org/2000/svg" 
      viewBox="0 0 1200 120" 
      preserveAspectRatio="none"
    >
      <path 
        d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" 
        fill="var(--color-crema)"
      />
    </svg>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      
      <!-- Heading principal -->
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-8 drop-shadow-lg">
        {heading}
      </h2>
      
      <!-- Texto secundario -->
      {subText && (
        <p class="text-xl md:text-2xl text-white text-opacity-90 mb-8 leading-relaxed drop-shadow-md">
          {subText}
        </p>
      )}
      
      <!-- Enlaces subrayados -->
      {subLinks.length > 0 && (
        <div class="sub-links mb-8 flex flex-wrap justify-center gap-6">
          {subLinks.map((link) => (
            <a 
              href={link.href}
              class="sub-link text-white text-lg font-medium underline decoration-2 underline-offset-4 hover:decoration-4 hover:text-gray-100 transition-all duration-200"
            >
              {link.label}
            </a>
          ))}
        </div>
      )}

      <!-- Logo (ej. SENCE) -->
      {logo && (
        <div class="logo-container mb-8 flex justify-center">
          <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-6 hover:bg-opacity-30 transition-all duration-300">
            <img 
              src={logo}
              alt={logoAlt || "Logo"}
              class="h-16 md:h-20 w-auto filter brightness-0 invert"
              loading="lazy"
            />
          </div>
        </div>
      )}

      <!-- CTA Button -->
      {cta && (
        <div class="cta-container">
          <a 
            href={cta.href}
            class={`inline-flex items-center px-8 py-4 font-semibold text-lg rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl ${
              cta.variant === 'outline' 
                ? 'border-2 border-white text-white hover:bg-white hover:text-gray-800' 
                : 'bg-white text-gray-800 hover:bg-gray-100'
            }`}
          >
            {cta.label}
            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      )}

    </div>

    <!-- Elementos decorativos -->
    <div class="decorative-elements absolute inset-0 overflow-hidden pointer-events-none opacity-10">
      <div class="absolute top-20 left-10 w-32 h-32 bg-white rounded-full"></div>
      <div class="absolute bottom-20 right-10 w-24 h-24 bg-white rounded-full"></div>
      <div class="absolute top-1/2 left-1/4 w-16 h-16 bg-white rounded-full"></div>
      <div class="absolute bottom-1/3 right-1/4 w-20 h-20 bg-white rounded-full"></div>
    </div>

  </div>
</section>

<style>
  .callout-banner {
    position: relative;
    overflow: hidden;
  }
  
  .sub-link {
    text-decoration-color: rgba(255, 255, 255, 0.8);
    transition: all var(--transition-fast);
  }
  
  .sub-link:hover {
    text-decoration-color: rgba(255, 255, 255, 1);
    text-decoration-thickness: 3px;
  }
  
  .logo-container img {
    filter: brightness(0) invert(1);
    transition: transform var(--transition-base);
  }
  
  .logo-container:hover img {
    transform: scale(1.05);
  }
  
  .decorative-elements > div {
    animation: float 6s ease-in-out infinite;
  }
  
  .decorative-elements > div:nth-child(2) {
    animation-delay: -2s;
  }
  
  .decorative-elements > div:nth-child(3) {
    animation-delay: -4s;
  }
  
  .decorative-elements > div:nth-child(4) {
    animation-delay: -1s;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) rotate(0deg);
    }
    33% {
      transform: translateY(-10px) rotate(1deg);
    }
    66% {
      transform: translateY(5px) rotate(-1deg);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .sub-links {
      flex-direction: column;
      align-items: center;
      gap: var(--space-4);
    }
  }
</style>